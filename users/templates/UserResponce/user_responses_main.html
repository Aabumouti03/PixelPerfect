{% extends 'users/base.html' %}
{% load static %}

{% block content %}
    <div class="content"> <!-- Updated to match your friend's layout -->
        <h2 class="page-title">My Responses</h2>
        <link rel="stylesheet" href="{% static 'users/css/userresponse_style.css' %}">
        
        {% for exercise in exercises %}
        <div class="exercise-card">
            <div class="exercise-header" onclick="toggleExercise('{{ exercise.id }}')">
                <h3>{{ exercise.title }}</h3>
                <button class="toggle-btn">+</button>
            </div>
            <div id="exercise-{{ exercise.id }}" class="exercise-content">
                <p class="exercise-description">{{ exercise.description }}</p>
                
                {% for question in exercise.questions.all %}
                <div class="question-card">
                    <h4>{{ question.question_text }}</h4>

                    {% for response in question.responses.all %}
                    <div class="response-box">
                        <p>{{ response.response_text }}</p>
                    </div>
                    {% empty %}
                    <p class="no-response">No responses yet.</p>
                    {% endfor %}
                </div>
                {% empty %}
                <p class="no-question">No questions found.</p>
                {% endfor %}
            </div>
        </div>
        {% empty %}
        <p>No exercises found.</p>
        {% endfor %}
    </div>

    <script>
        function toggleExercise(exerciseId) {
            const content = document.getElementById(`exercise-${exerciseId}`);
            content.classList.toggle("show");
        }
    </script>
{% endblock %}
